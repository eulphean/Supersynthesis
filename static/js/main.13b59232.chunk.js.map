{"version":3,"sources":["svg/close.svg","stores/LightConfigStore.js","components/Websocket.js","components/CommonStyles.js","svg/about.svg","components/Popup.js","components/Navbar.js","components/Light.js","components/LightManager.js","components/MeshManager.js","components/BpmManager.js","components/WaveCanvas.js","components/BottomBar.js","components/App.js","index.js"],"names":["_defs","_g","LIGHT_TYPE","LIGHT_STATE","GROW_STATE","this","lightSubscribers","infoSubscribers","configIndex","bpm","lightConfig","maxLightHeight","prepareDefaultLightConfig","listener","push","filter","s","infoListeners","height","console","log","i","stateObject","lightType","lightState","growState","activeState","state","max","Math","floor","random","length","dbConfig","filterConfig","json","Date","payload","JSON","stringify","config","lightData","updateLightConfig","forEach","c","d","data","stateObj","siteURL","herokuURL","socket","io","reconnection","reconnectionDelay","reconnectionAttempts","Infinity","once","subscribe","bind","on","logTime","LightConfigStore","setPayloadFromDatabase","emit","getPayloadForDatabase","color","bgBlack","fgWhite","fontSize","extraSmall","kindaSmall","verySmall","lessSmall","small","lessBig","big","veryBig","extraBig","huge","veryHuge","extraHuge","massive","veryMassive","extraMassive","enormous","veryEnormous","extraEnormous","insane","veryInsaane","extraInsane","gaia","veryGaia","extraGaia","padding","tiny","enourmous","veryInsane","fontFamily","_excluded","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref","svgRef","title","props","createElement","viewBox","ref","id","className","width","x1","y1","x2","y2","ForwardRef","forwardRef","PopupState","customFadeIn","Radium","keyframes","from","opacity","to","customFadeOut","styles","overlay","position","top","bottom","left","right","background","zIndex","fadeIn","animationName","animationDuration","animationFillMode","animationTimingFunction","fadeOut","fadeOutUp","fadeOutDown","fadeInDown","fadeInUp","showOverlay","hideOverlay","showContent","hideContent","contentContainer","display","alignItems","justifyContent","content","borderRadius","overflow","maxWidth","maxHeight","stretchContainer","flexDirection","paddingLeft","paddingRight","borderStyle","borderWidth","borderColor","marginTop","marginBottom","textAlign","letterSpacing","lineHeight","body","mediaQueryOnText","iconContainer","alignSelf","marginRight","fill","icon","footerContainer","footer","copyright","link","backgroundColor","Popup","isVisible","popupState","React","createRef","overlayStyle","contentContainerStyle","getAboutContent","onClick","handleOnTouch","onTouchStart","style","onAnimationEnd","contentAnimationEnd","setState","hidePopup","getFooter","iconButton","getIconButton","bodyStyle","description","rel","href","current","scrollTop","event","stopPropagation","Component","transform","fillRule","stroke","strokeWidth","animation","rotate","container","fbWhite","simpleRotation","Navbar","popupRef","aboutStyle","heightStyle","getHeightStyle","block","handleAbout","getHeight","deviceHeight","window","innerHeight","deviceWidth","innerWidth","orientation","ORIENTATION","PORTRAIT","LANDSCAPE","showPopup","Light","xPos","yPos","lightWidth","p5","pos","createVector","newX","getNewPos","topPos","bottomPos","lightColor","lightPointColor","curIdx","updateHeight","growIntervalId","setInterval","randomizeGrowState","isUserInteracting","isCurrentlyGrowing","noStroke","handleGrowState","rect","canDraw","calcGrowState","getGrowState","r","int","setGrowState","curGrowthActive","curGrowState","curHeight","setHeightState","mapPos","map","circle","getHeightState","getDrawState","getLightState","curLightState","setLightState","setDrawState","onHeight","LightManager","lights","curTime","now","gliderIdx","direction","allLightsOff","timeOn","prepareLights","subscribeInfo","updateTimeOn","subscribeLights","updateLights","newBpm","getBpm","resetSystem","setMaxHeight","lightIncrement","l","meshEllipsePos","boundaryWidth","handleUserInteracting","handleUserNotInteracting","draw","light","dist","updateGrowState","isGrowing","isOn","updateDrawState","NUM_LIGHTS","turnOffAllLights","MeshManager","ellipsePos","mouseX","mouseY","containEllipse","drawLine","drawEllipse","strokeWeight","ellipse","startPoint","endPoint","weight","line","bpmManager","curBpm","bpmSubscribers","isInteracting","shouldAdd","sum","elapsedTime","v","sin","mapped","setBpm","sketch","lightManager","meshManager","setup","select","createCanvas","BpmManager","drawCenterLine","update","mousePressed","mouseReleased","windowResized","resizeCanvas","margin","WaveCanvas","containerRef","sketchRef","myP5","containerStyle","info","BottomBar","index","onInfoUpdate","states","onSend","idx","getConfigIndex","Websocket","commitLightConfigData","button","App","addEventListener","handleResize","evaluateOrientation","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.13b59232.chunk.js","sourcesContent":["var _defs, _g;\n\nvar _excluded = [\"svgRef\", \"title\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 48.51 48.51\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".rect{fill:inherit;}.cls-2{fill:none;stroke:#b3b3b3;stroke-miterlimit:10;stroke-width:4px;}\"))), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Layer_2\",\n    \"data-name\": \"Layer 2\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Layer_1-2\",\n    \"data-name\": \"Layer 1\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    className: \"rect\",\n    width: 48.51,\n    height: 48.51\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    className: \"cls-2\",\n    x1: 9.63,\n    y1: 9.64,\n    x2: 38.88,\n    y2: 38.89\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    className: \"cls-2\",\n    x1: 9.63,\n    y1: 38.89,\n    x2: 38.88,\n    y2: 9.64\n  })))));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.787123c6.svg\";\nexport { ForwardRef as ReactComponent };","// Name: DatabaseParamStore.js\r\n// Author: Amay Kataria. \r\n// Date: 02/19/2022\r\n// Description: This data store is responsible to hold bpm, all 48 lights and number of entries.\r\n// This data will be stored in the database. Components that need this data will subscribe to this store.  \r\n\r\nexport const LIGHT_TYPE = {\r\n    TOP: 'TOP',\r\n    BOTTOM: 'BOTTOM'\r\n};\r\n\r\nexport const LIGHT_STATE = {\r\n    ON: 1,\r\n    OFF: 0\r\n};\r\n\r\nexport const GROW_STATE = {\r\n    NONE: 0,\r\n    GROW: 1,\r\n    SHRINK: 2\r\n}\r\n\r\nconst NUM_LIGHTS = 24;\r\n\r\nclass LightConfigStore {\r\n    constructor() {\r\n        // Listeners for this database. \r\n        this.lightSubscribers = []; \r\n        this.infoSubscribers = [];\r\n\r\n        // Default values. \r\n        this.configIndex = 0; \r\n        this.bpm = 150;\r\n        this.lightConfig = [];\r\n\r\n        // Helper value to create default heights. \r\n        this.maxLightHeight = 0;\r\n\r\n        // Default light config for 24 lights. \r\n        this.prepareDefaultLightConfig();\r\n    }\r\n\r\n    subscribeLights(listener) {\r\n        this.lightSubscribers.push(listener); \r\n        const removeListener = () => {\r\n            this.lightSubscribers = this.lightSubscribers.filter((s) => listener !== s);\r\n        };\r\n\r\n        return removeListener;\r\n    }\r\n\r\n    subscribeInfo(listener) {\r\n        this.infoSubscribers.push(listener);\r\n        const removeListener = () => {\r\n            this.infoListeners = this.infoSubscribers.filter((s) => listener !== s);\r\n        };\r\n\r\n        return removeListener;\r\n    }\r\n\r\n    setMaxHeight(height) {\r\n        this.maxLightHeight = height; \r\n    }\r\n\r\n    // Default config for 24 lights. \r\n    prepareDefaultLightConfig() {\r\n        console.log('Preparing default config.');\r\n        for (let i = 0; i < NUM_LIGHTS; i++) {\r\n            // Create a state object.\r\n            let stateObject = {\r\n                'light': {\r\n                    'TOP': 1, \r\n                    'BOTTOM': 1\r\n                },\r\n                'draw': {\r\n                    'TOP': false,\r\n                    'BOTTOM': false\r\n                },\r\n                'grow': {\r\n                    'TOP': {\r\n                        'state': GROW_STATE.NONE,\r\n                        'active': false\r\n                    },\r\n                    'BOTTOM': {\r\n                        'state': GROW_STATE.NONE,\r\n                        'active': false\r\n                    }\r\n                },\r\n                'height': {\r\n                    'TOP': 0,\r\n                    'BOTTOM': 0\r\n                }\r\n            }\r\n            this.lightConfig.push(stateObject); \r\n        }\r\n    }\r\n\r\n    getFullConfig(i) {\r\n        return this.lightConfig[i]; \r\n    }\r\n\r\n    // GET/SET light's state. \r\n    getLightState(i) {\r\n        return this.lightConfig[i]['light'];\r\n    }\r\n    setLightState(i, lightType, lightState) {\r\n        this.lightConfig[i]['light'][lightType] = lightState; \r\n    }\r\n\r\n    // GET/SET light's grow state. \r\n    getGrowState(i) {\r\n        return this.lightConfig[i]['grow'];\r\n    }\r\n    setGrowState(i, lightType, growState, activeState) {\r\n        this.lightConfig[i]['grow'][lightType]['state'] = growState;\r\n        this.lightConfig[i]['grow'][lightType]['active'] = activeState;\r\n    }\r\n\r\n    // GET/SET light's draw state. \r\n    getDrawState(i) {\r\n        return this.lightConfig[i]['draw'];\r\n    }\r\n    setDrawState(i, lightType, state) {\r\n        this.lightConfig[i]['draw'][lightType] = state;\r\n    }\r\n\r\n    // GET/SET light's heights. \r\n    getHeightState(i) {\r\n        return this.lightConfig[i]['height'];\r\n    }\r\n    setHeightState(i, lightType, height) {\r\n        this.lightConfig[i]['height'][lightType] = height; \r\n    }\r\n\r\n    getRandomInt(max) {\r\n        return Math.floor(Math.random() * max);\r\n    }\r\n\r\n    getBpm() {\r\n        return this.bpm;\r\n    }\r\n    setBpm(bpm) {\r\n        this.bpm = bpm; \r\n        // Trigger info subscribers. \r\n        for (let i = 0; i < this.infoSubscribers.length; i++) {\r\n            this.infoSubscribers[i]();\r\n        }\r\n    }\r\n    getConfigIndex() {\r\n        return this.configIndex;\r\n    }\r\n\r\n    // Increment the config index because this will be a new entry.\r\n    getPayloadForDatabase() {\r\n        //Bad assumption that this call will be successful. \r\n        this.configIndex += 1; \r\n        let dbConfig = this.filterConfig();\r\n        this.json = {}\r\n        this.json['bpm'] = this.bpm; \r\n        this.json['lights'] = dbConfig;\r\n        this.json['time'] = Date();\r\n\r\n        let payload = {\r\n            'index' : this.configIndex, \r\n            'config': JSON.stringify(this.json)\r\n        }\r\n\r\n        // Trigger info subscribers for new data. \r\n        for (let i = 0; i < this.infoSubscribers.length; i++) {\r\n            this.infoSubscribers[i]();\r\n        }\r\n\r\n        return payload;\r\n    }\r\n\r\n    setPayloadFromDatabase(payload) {\r\n        console.log('Overwriting current config.');\r\n\r\n        // Get current index. \r\n        this.configIndex = payload['index'];\r\n\r\n        // Config items. \r\n        let config = payload['config'];\r\n        this.bpm = config['bpm'];\r\n\r\n        // Trigger info subscribers. \r\n        for (let i = 0; i < this.infoSubscribers.length; i++) {\r\n            this.infoSubscribers[i]();\r\n        }\r\n        \r\n        // Light data is an array. Update the current light\r\n        // config with this incoming data. \r\n        let lightData = config['lights'];\r\n        this.updateLightConfig(lightData);\r\n\r\n        // Trigger light subscribers.\r\n        for (let i = 0; i < this.lightSubscribers.length; i++) {\r\n            this.lightSubscribers[i]();\r\n        }\r\n    }\r\n\r\n    // Extract the config we need for the database. \r\n    filterConfig() {\r\n        let dbConfig = []; \r\n        this.lightConfig.forEach(c => {\r\n            let d = c['light']\r\n            dbConfig.push(d);\r\n        });\r\n        return dbConfig; \r\n    }\r\n\r\n    updateLightConfig(lightData) {\r\n        // Empty the current light config. \r\n        this.lightConfig = []; \r\n        \r\n        // Create a new config. \r\n        for (let i = 0; i < lightData.length; i++) {\r\n            let data = lightData[i];\r\n            let stateObj = {\r\n                'light': {\r\n                    'TOP': data[LIGHT_TYPE.TOP], \r\n                    'BOTTOM': data[LIGHT_TYPE.BOTTOM]\r\n                },\r\n                // Create the draw states from the incoming light state. \r\n                'draw': {\r\n                    'TOP': data[LIGHT_TYPE.TOP] === LIGHT_STATE.ON,\r\n                    'BOTTOM': data[LIGHT_TYPE.BOTTOM] === LIGHT_STATE.ON\r\n                },\r\n                'grow': {\r\n                    'TOP': {\r\n                        'state': GROW_STATE.NONE,\r\n                        'active': false\r\n                    },\r\n                    'BOTTOM': {\r\n                        'state': GROW_STATE.NONE,\r\n                        'active': false\r\n                    }\r\n                },\r\n                // Create the height state from the incoming light state. \r\n                'height': {\r\n                    'TOP': data[LIGHT_TYPE.TOP] === LIGHT_STATE.ON ? this.maxLightHeight : 0,\r\n                    'BOTTOM': data[LIGHT_TYPE.BOTTOM] === LIGHT_STATE.ON ? this.maxLightHeight : 0\r\n                }\r\n            }\r\n            this.lightConfig.push(stateObj);\r\n        }\r\n    }\r\n}\r\n\r\nexport default new LightConfigStore();","/*\r\n  Name: Websocket.js\r\n  Author: Amay Kataria\r\n  Date: 02/15/2022\r\n  Description: Class responsible for communication with the webserver. We use websockets\r\n  technology for this. Here we have the websocket client, which communicates with backend\r\n  server over websockets.\r\n*/\r\n\r\nimport io  from 'socket.io-client'\r\nimport LightConfigStore from '../stores/LightConfigStore';\r\n\r\n// const localhostURL = \"http://localhost:5000\";\r\nconst herokuURL = \"https://supersynth.herokuapp.com\";\r\n\r\nclass Websocket {\r\n  constructor() {\r\n      this.siteURL = herokuURL + '/app'; \r\n\r\n      this.socket = io(this.siteURL, {\r\n          reconnection: true,\r\n          reconnectionDelay: 500,\r\n          reconnectionAttempts: Infinity\r\n      });\r\n\r\n      this.socket.once('connect', this.subscribe.bind(this));\r\n  }\r\n\r\n  subscribe() {\r\n      console.log('Connected');\r\n      // Subscribe to incoming events from the webserver here. \r\n      this.socket.on('time', this.logTime.bind(this));\r\n      this.socket.on('receiveData', (payload) => {\r\n        LightConfigStore.setPayloadFromDatabase(payload); \r\n      });\r\n\r\n      // We are connected - trigger a request to receive data.\r\n      this.socket.emit('getData');\r\n  }\r\n\r\n  // ----------------------- DATABASE CALLS --------------------- //\r\n  saveEntry() {\r\n    let payload = {\r\n      'index': 0,\r\n      'data': 'Hi this is fresh data'\r\n    }\r\n\r\n    this.socket.emit('saveData', payload);\r\n  }\r\n\r\n  // -------------------- DON'T CHANGE THESE -------------------    \r\n  disconnect() {\r\n      console.log('Socket Server Disconnected.');\r\n  }\r\n\r\n  logTime(data) {\r\n    // console.log('Socket Connection Alive: ' + data);\r\n  }\r\n\r\n  commitLightConfigData() {\r\n    let payload = LightConfigStore.getPayloadForDatabase();\r\n    this.socket.emit('saveData', payload);\r\n  }\r\n}\r\n\r\nexport default new Websocket();\r\n\r\n\r\n","const color = {\r\n    bgBlack: 'black',\r\n    fgWhite: 'white'\r\n};\r\n\r\nconst fontSize = {\r\n    extraSmall: '8px',\r\n    kindaSmall: '10px',\r\n    verySmall: '12px',\r\n    lessSmall: '14px',\r\n    small: '16px',\r\n    lessBig: '18px',\r\n    big: '20px',\r\n    veryBig: '24px',\r\n    extraBig: '28px',\r\n    huge: '32px',\r\n    veryHuge: '36px',\r\n    extraHuge: '40px',\r\n    massive: '44px',\r\n    veryMassive: '48px',\r\n    extraMassive: '52px',\r\n    enormous: '56px',\r\n    veryEnormous: '60px',\r\n    extraEnormous: '64px',\r\n    insane: '68px',\r\n    veryInsaane: '72px',\r\n    extraInsane: '76px',\r\n    gaia: '80px',\r\n    veryGaia: '84px',\r\n    extraGaia: '88px'\r\n};\r\n\r\nconst padding = {\r\n    tiny: '2px',\r\n    // Increments of 4\r\n    extraSmall: '4px',\r\n    kindaSmall: '6px',\r\n    verySmall: '8px',\r\n    small: '12px',\r\n    lessBig: '16px',\r\n    // Incremenets of 8\r\n    big : '20px',\r\n    veryBig : '28px',\r\n    extraBig : '36px',\r\n    // Increments of 12\r\n    huge: '52px',\r\n    veryHuge: '64px',\r\n    extraHuge: '76px',\r\n    // Incremenets of 16\r\n    massive: '92px',\r\n    veryMassive: '108px',\r\n    extraMassive: '124px',\r\n    // Increment of 20\r\n    enourmous: '100px',\r\n    veryEnormous: '120px',\r\n    extraEnormous: '140px',\r\n    // Increment of 40\r\n    insane: '160px',\r\n    veryInsane: '200px',\r\n    extraInsane: '240px'\r\n\r\n};\r\n\r\nconst fontFamily = {\r\n    heatwave: 'heatwaveregular',\r\n    airwaves: 'airwavesregular',\r\n    josefin: 'josefin_sanssemibold'\r\n};\r\n\r\nexport { color, fontSize, fontFamily, padding };","var _g;\n\nvar _excluded = [\"svgRef\", \"title\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgAbout = function SvgAbout(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"28px\",\n    height: \"28px\",\n    viewBox: \"0 0 28 28\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group-Copy\",\n    transform: \"translate(0.5 0.5)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group\",\n    transform: \"translate(0 0.0012207031)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0L26.8571 0L26.8571 26.5126L0 26.5126L0 0Z\",\n    id: \"Rectangle\",\n    fill: \"#FFFFFF\",\n    fillRule: \"evenodd\",\n    stroke: \"#000000\",\n    strokeWidth: 1\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.68323 11.5706L8.53964 11.5706L8.53964 15.4269L4.68323 15.4269L4.68323 11.5706Z\",\n    id: \"Rectangle-49-Copy\",\n    fill: \"#000000\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.0839 0L26.8568 0L26.8568 26.5126L13.0839 26.5126L13.0839 0Z\",\n    id: \"Rectangle-2\",\n    fill: \"#000000\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.1803 11.5703L22.0367 11.5703L22.0367 15.4267L18.1803 15.4267L18.1803 11.5703Z\",\n    id: \"Rectangle-49\",\n    fill: \"#FFFFFF\",\n    fillRule: \"evenodd\",\n    stroke: \"none\"\n  }))));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgAbout, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/about.ea00a3b0.svg\";\nexport { ForwardRef as ReactComponent };","/*\r\n  Name: Popup.js\r\n  Author: Amay Kataria\r\n  Date: 02/21/2022\r\n  Description: Popup component that is shown to display the about information. \r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\nimport { color, padding, fontFamily, fontSize } from './CommonStyles.js'\r\nimport { ReactComponent as Exit } from '../svg/close.svg'\r\nimport { fadeOutUp, fadeOutDown, fadeInDown, fadeInUp } from 'react-animations'\r\n\r\n// Maintain the current popup state (to track animations)\r\nvar PopupState = {\r\n    Open: 0,\r\n    Close: 1,\r\n    None: 2\r\n}; \r\n\r\n// Custom Fade in animation. \r\nconst customFadeIn = Radium.keyframes({\r\n    from: {\r\n        opacity: '0'\r\n    },\r\n    to: {\r\n        opacity: '0.5'\r\n    }\r\n}, 'fadesIn'); \r\n\r\nconst customFadeOut = Radium.keyframes({\r\n    from: {\r\n        opacity: '0.5'\r\n    },\r\n    to: {\r\n        opacity: '0'\r\n    }\r\n}, 'fadesOut'); \r\n\r\nconst fadeInDuration = '0.5s'; \r\nconst slideInDuration = '2.0s'; \r\nconst fadeOutDuration = '1.5s';\r\n\r\nconst aboutTheWork = 'Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.';\r\nconst styles={\r\n    overlay: {\r\n        position: 'fixed',\r\n        top: '0px',\r\n        bottom: '0px',\r\n        left: '0px',\r\n        right: '0px',\r\n        background: color.bgBlack,\r\n        zIndex: '999'\r\n    },\r\n\r\n    fadeIn: {\r\n        animationName: customFadeIn,\r\n        animationDuration: fadeInDuration,\r\n        animationFillMode: 'forwards',\r\n        animationTimingFunction:'ease-in'\r\n    },\r\n    \r\n    fadeOut: {\r\n        animationName: customFadeOut,\r\n        animationDuration: fadeOutDuration,\r\n        animationFillMode: 'forwards',\r\n        animationTimingFunction: 'ease-out'\r\n    },\r\n\r\n    fadeOutUp: {\r\n        animationName: Radium.keyframes(fadeOutUp, 'fadeOutUp'),\r\n        animationDuration: fadeOutDuration,\r\n        animationFillMode: 'forwards',\r\n        animationTimingFunction: 'ease-out'\r\n    },\r\n\r\n    fadeOutDown: {\r\n        animationName: Radium.keyframes(fadeOutDown, 'fadeOutDown'),\r\n        animationDuration: fadeOutDuration,\r\n        animationFillMode: 'forwards',\r\n        animationTimingFunction: 'ease-out'\r\n    },\r\n\r\n    fadeInDown: {\r\n        animationName: Radium.keyframes(fadeInDown, 'fadeInDown'),\r\n        animationDuration: slideInDuration,\r\n        animationFillMode: 'forwards',\r\n        animationTimingFunction: 'ease-in'\r\n    },\r\n\r\n    fadeInUp: {\r\n        animationName: Radium.keyframes(fadeInUp, 'fadeInUp'),\r\n        animationDuration: slideInDuration,\r\n        animationFillMode: 'forwards',\r\n        animationTimingFunction: 'ease-in'\r\n    },\r\n\r\n    showOverlay: {\r\n        zIndex: '998',\r\n        opacity: '1'\r\n    },\r\n\r\n    hideOverlay: {\r\n        zIndex: '-998',\r\n        opacity: '0'\r\n    },\r\n\r\n    showContent: {\r\n        zIndex: '999',\r\n        opacity: '1'\r\n    },\r\n\r\n    hideContent: {\r\n        zIndex: '-999',\r\n        opacity: '0'\r\n    },\r\n\r\n    contentContainer: {\r\n        position: 'fixed',\r\n        zIndex: '-999',\r\n        left: '0px',\r\n        top:'0px',\r\n        bottom: '0px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        height: '100%',\r\n        width: '100%',\r\n    },\r\n\r\n    content: {\r\n        borderRadius: fontSize.tiny,\r\n        overflow: 'auto',\r\n        maxWidth: 'calc(100% - 50px)', // Bind this to media query\r\n        maxHeight: 'calc(100% - 100px)', // Bind this to media query\r\n        \r\n        '@media (min-width: 600px)': {      \r\n            maxWidth: 'calc(100% - 100px)', // Bind this to media query\r\n            maxHeight: 'calc(100% - 100px)', // Bind this to media query\r\n        },\r\n\r\n        '@media (min-width: 750px)': {  \r\n            maxWidth: 'calc(100% - 150px)', // Bind this to media query\r\n            maxHeight: 'calc(100% - 100px)', // Bind this to media query\r\n        },\r\n\r\n        '@media (min-width: 1200px)' : {\r\n            maxWidth: 'calc(100% - 300px)', // Bind this to media query\r\n            maxHeight: 'calc(100% - 100px)', // Bind this to media query\r\n        }\r\n    },\r\n\r\n    stretchContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        background: color.bgBlack,\r\n        color: color.fgWhite,\r\n        paddingLeft: padding.small, // Bind this to media query\r\n        paddingRight: padding.small, // Bind this to media query,\r\n\r\n        '@media (min-width: 600px)': {      \r\n            paddingLeft: padding.extraHuge, \r\n            paddingRight: padding.extraHuge\r\n        },\r\n\r\n        '@media (min-width: 900px)': {  \r\n            paddingLeft: padding.veryMassive, \r\n            paddingRight: padding.veryMassive\r\n        },\r\n\r\n        '@media (min-width: 1200px)' : {\r\n            paddingLeft: padding.extraMassive, \r\n            paddingRight: padding.extraMassive\r\n        },\r\n        opacity: '1.0',\r\n        borderStyle: 'solid',\r\n        borderWidth: '2px',\r\n        borderColor: color.fgWhite\r\n    },\r\n\r\n    title: {\r\n        marginTop: padding.lessSmall,\r\n        marginBottom: padding.small,\r\n        textAlign: 'center',\r\n        fontFamily: fontFamily.heatwave,\r\n        fontSize: fontSize.extraBig,\r\n        letterSpacing: '2.5px',\r\n        lineHeight: '1.8',\r\n       \r\n        '@media (min-width: 750px)': {  \r\n            fontSize: fontSize.extraBig\r\n        },\r\n\r\n        '@media (min-width: 900px)': {  \r\n            fontSize: fontSize.huge\r\n        },\r\n\r\n        '@media (min-width: 1200px)' : {\r\n            fontSize: fontSize.veryHuge\r\n        }\r\n    },\r\n\r\n    body: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        fontFamily: fontFamily.josefin,\r\n        letterSpacing: '1.5px',\r\n        fontSize: fontSize.small,\r\n        color: color.fgWhite\r\n    },\r\n\r\n    // Applied on stuff\r\n    mediaQueryOnText: {\r\n        '@media (min-width: 750px)': {  \r\n            fontSize: fontSize.big\r\n        },\r\n\r\n        '@media (min-width: 900px)': {  \r\n            fontSize: fontSize.veryBig\r\n        }\r\n    },\r\n\r\n    iconContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        alignSelf: 'flex-end',\r\n        marginRight: '-' + fontSize.verySmall,\r\n        height: fontSize.big,\r\n        width: fontSize.big,\r\n        fill: color.fgWhite,\r\n\r\n        '@media (min-width: 600px)': {  \r\n            marginRight: '-' + fontSize.extraInsane,\r\n            height: fontSize.veryBig, \r\n            width: fontSize.veryBig\r\n        },\r\n\r\n        '@media (min-width: 900px)': {  \r\n            height: fontSize.extraBig, \r\n            width: fontSize.extraBig,\r\n            marginRight: '-108px'\r\n        },\r\n\r\n        '@media (min-width: 1200px)': {  \r\n            marginRight: '-124px'\r\n        }\r\n    },\r\n\r\n    icon: { \r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n\r\n    footerContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        marginTop: padding.veryBig,\r\n        fontFamily: fontFamily.josefin,\r\n        letterSpacing: '1.5px',\r\n    },\r\n\r\n    footer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginTop: padding.verySmall,\r\n        fontSize: fontSize.lessSmall,\r\n        '@media (min-width: 750px)': {  \r\n            fontSize: fontSize.small,\r\n        }\r\n    },\r\n\r\n    copyright: {\r\n        marginTop: padding.veryBig,\r\n        fontSize: fontSize.verySmall,\r\n        marginBottom: padding.small\r\n    },\r\n\r\n    link: {\r\n        backgroundColor: color.fgWhite,\r\n        color: color.bgBlack,\r\n        padding: padding.tiny\r\n    }\r\n}\r\n\r\nclass Popup extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            isVisible: false,\r\n            popupState: PopupState.None,\r\n        };\r\n\r\n        this.content = React.createRef(); \r\n    }\r\n\r\n    render() {\r\n        // Handle overlay styles. \r\n        let overlayStyle; \r\n        if (this.state.isVisible) {\r\n            overlayStyle = [styles.overlay, styles.showOverlay]; \r\n            if (this.state.popupState === PopupState.Open) {\r\n                overlayStyle = [overlayStyle, styles.fadeIn]; \r\n            } else if (this.state.popupState === PopupState.Close) {\r\n                overlayStyle = [overlayStyle, styles.fadeOut]; \r\n            } else {\r\n                // Do nothing. \r\n            }\r\n        } else {\r\n            overlayStyle = [styles.overlay, styles.hideOverlay]; \r\n        }\r\n\r\n        // Handle different types of Popups. \r\n        let content, contentContainerStyle; \r\n        content = this.getAboutContent();\r\n        if (this.state.isVisible) {\r\n            contentContainerStyle = [styles.contentContainer, styles.showContent]; \r\n            if (this.state.popupState === PopupState.Open) {\r\n                contentContainerStyle = [contentContainerStyle, styles.fadeInDown]; \r\n            } else if (this.state.popupState === PopupState.Close) {\r\n                contentContainerStyle = [contentContainerStyle, styles.fadeOutUp];\r\n            } else {\r\n                // Do nothing when it's in None state. \r\n            }\r\n        } else {\r\n            contentContainerStyle = [styles.contentContainer, styles.hideContent]; \r\n        }\r\n\r\n        return (\r\n            <div onClick={this.handleOnTouch.bind(this)} onTouchStart={this.handleOnTouch.bind(this)} >\r\n                <div style={overlayStyle}></div>\r\n                <div onAnimationEnd={this.contentAnimationEnd.bind(this)} style={contentContainerStyle}>\r\n                    {content}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    contentAnimationEnd() {\r\n        if (this.state.isVisible) {\r\n            // Hide everything when content animation ends. \r\n            if (this.state.popupState === PopupState.Close) {\r\n                this.setState({\r\n                    isVisible: false,\r\n                    popupState: PopupState.None\r\n                }); \r\n            }\r\n        }\r\n    }\r\n\r\n    getIconButton() {\r\n        return(\r\n            <div onClick={this.hidePopup.bind(this)} style={styles.iconContainer}>\r\n                <Exit style={styles.icon} />\r\n            </div>\r\n        ); \r\n    }\r\n\r\n    getAboutContent() {\r\n        let footer = this.getFooter(); \r\n        let iconButton = this.getIconButton();  \r\n        let bodyStyle = [styles.body, styles.mediaQueryOnText];\r\n        return (\r\n            <div ref={this.content} style={styles.content}>\r\n                <div style={styles.stretchContainer}>\r\n                    { iconButton }\r\n                    <div style={bodyStyle}>\r\n                        <div style={styles.title}>supersynthesis</div>\r\n                        <div style={styles.description}>{aboutTheWork}</div>                        \r\n                    </div>\r\n                    { footer }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    getFooter() {\r\n        const tim = 'https://www.vaexhibitions.arts.columbia.edu/class-of-2021-first-years/timothy-kwasny';\r\n        const amay = 'https://amaykataria.com';\r\n        return (\r\n            <div style={styles.footerContainer}>\r\n                <div style={styles.footer}>\r\n                    <span>Created by&nbsp;</span>\r\n                    <a \r\n                        style={styles.link} \r\n                        target='_blank' \r\n                        rel=\"noopener noreferrer\" \r\n                        href={amay}>\r\n                        Amay Kataria\r\n                    </a>\r\n                </div>\r\n                <div style={styles.footer}>\r\n                    <span>Sound by&nbsp;</span>\r\n                    <a \r\n                        style={styles.link} \r\n                        target='_blank' \r\n                        rel=\"noopener noreferrer\" \r\n                        href={tim}>\r\n                        Timothy Kwasny\r\n                    </a>\r\n                </div>\r\n                <div style={styles.copyright}> Amay Kataria 2022</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    showPopup() {\r\n        // Adjust the scroll top.\r\n        this.content.current.scrollTop = 0; \r\n\r\n        this.setState({\r\n            isVisible: true,\r\n            popupState: PopupState.Open,\r\n        }); \r\n    }\r\n\r\n    hidePopup(event) {\r\n        event.stopPropagation(); \r\n\r\n        this.setState({\r\n            popupState: PopupState.Close\r\n        });\r\n    }\r\n\r\n    handleOnTouch(event) {\r\n        // Don't let this propogate to the main screen\r\n        // where touch events mean something. \r\n        event.stopPropagation();\r\n    }\r\n }\r\n\r\nexport default Radium(Popup);\r\n\r\n","/*\r\n  Name: BottomBar.js\r\n  Author: Amay Kataria\r\n  Date: 02/19/2022\r\n  Description: React component for the top navigation bar on the webpage.\r\n*/\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\nimport Popup from './Popup'\r\nimport { ORIENTATION } from './App'\r\nimport { ReactComponent as About } from '../svg/about.svg'\r\nimport {color, fontFamily, fontSize, padding} from './CommonStyles'\r\n\r\nconst animation = {\r\n  rotate: Radium.keyframes({\r\n    '0%': {\r\n      transform: 'rotate(0deg)'\r\n    },\r\n    '50%': {\r\n      transform: 'rotate(180deg)',\r\n    },\r\n    '100%': {\r\n      transform: 'rotate(360deg)',\r\n    }\r\n  }),\r\n}\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        paddingLeft: padding.small,\r\n        paddingRight: padding.small,\r\n        zIndex: 1\r\n    },\r\n\r\n    title: {\r\n        backgroundColor: color.bgBlack,\r\n        color: color.fbWhite,\r\n        padding: padding.small,\r\n        fontFamily: fontFamily.heatwave,\r\n        fontSize: fontSize.lessBig,\r\n        letterSpacing: '2px'\r\n    },\r\n    \r\n    iconContainer: {\r\n      marginTop: padding.kindaSmall,\r\n    },\r\n\r\n    simpleRotation: {\r\n      animation: 'x 30s ease-in-out infinite',\r\n      animationName: animation.rotate\r\n    },\r\n  \r\n    icon: {\r\n        width: '100%',\r\n        height: '100%'\r\n    }\r\n};\r\n\r\nclass Navbar extends React.Component {\r\n  constructor(props) {\r\n    super(props); \r\n    this.state={\r\n    }\r\n\r\n    this.popupRef = React.createRef(); \r\n  }\r\n\r\n  render() {\r\n    let aboutStyle = [styles.iconContainer, styles.simpleRotation];\r\n    let heightStyle = this.getHeightStyle(); \r\n    return (\r\n      <div style={styles.block}>\r\n        <Popup ref={this.popupRef}/>\r\n        <div style={[styles.container, heightStyle]}>\r\n          <div style={styles.title}>supersynthesis</div>\r\n          <div style={aboutStyle} onClick={this.handleAbout.bind(this)}>\r\n            <About style={styles.icon} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getHeightStyle() {\r\n    let height = this.getHeight();\r\n    let heightStyle = {\r\n      height: height + 'px'\r\n    };\r\n    return heightStyle; \r\n  }\r\n\r\n  getHeight() {\r\n    let deviceHeight = window.innerHeight;\r\n    let deviceWidth = window.innerWidth; \r\n    let c = 0; \r\n    if (this.props.orientation === ORIENTATION.PORTRAIT) {\r\n      if (deviceHeight < 900) {\r\n        c = 0.1\r\n      }\r\n\r\n      if (deviceHeight > 900 && deviceHeight < 1000) {\r\n        c = 0.075\r\n      }\r\n\r\n      if (deviceHeight > 1000) {\r\n        c = 0.06\r\n      }\r\n    }\r\n\r\n    if (this.props.orientation === ORIENTATION.LANDSCAPE) {\r\n      if (deviceWidth < 1000) {\r\n        c = 0.15; \r\n      }      \r\n\r\n      if (deviceWidth > 1000) {\r\n        c = 0.09\r\n      }\r\n    }\r\n\r\n    return deviceHeight * c; \r\n  }\r\n\r\n  handleAbout() {\r\n    console.log('Create a popup.');\r\n    this.popupRef.current.showPopup();\r\n  }\r\n}\r\n\r\nexport default Radium(Navbar);\r\n","/*\r\n  Name: Light.js\r\n  Author: Amay Kataria\r\n  Date: 02/19/2022\r\n  Description: A class representing each light that is painted on the canvas. \r\n*/\r\nimport LightConfigStore, { LIGHT_TYPE, LIGHT_STATE, GROW_STATE } from \"../stores/LightConfigStore\";\r\n\r\nconst GROW_FACTOR = 2.5;\r\n\r\nexport default class Light {\r\n    constructor(s, i, xPos, yPos, lightWidth) {\r\n        // Sketch object. \r\n        this.p5 = s; \r\n\r\n        // Light's width. \r\n        this.lightWidth = lightWidth;\r\n\r\n        // Origin point at the center.\r\n        this.pos = this.p5.createVector(xPos, yPos);\r\n        \r\n        // Point at the top. \r\n        let newX = this.getNewPos() + this.lightWidth/2; // Keep this at the center of the light.\r\n        this.topPos = this.p5.createVector(newX, yPos - this.p5.height/2);\r\n        // Point at the bottom.\r\n        this.bottomPos = this.p5.createVector(newX, yPos + this.p5.height/2);        \r\n        \r\n        // Colors. \r\n        this.lightColor = this.p5.color('white');\r\n        this.lightPointColor = this.p5.color('green'); // Only debug.\r\n\r\n        // Store the current light config. \r\n        this.curIdx = i; \r\n        this.updateHeight(); \r\n\r\n        // Variable for the timer's interval id. \r\n        this.growIntervalId = ''; \r\n        setInterval(this.randomizeGrowState.bind(this), 3000); \r\n    }\r\n\r\n    draw(isUserInteracting, isCurrentlyGrowing) {\r\n        let newX = this.getNewPos();\r\n        this.p5.fill(this.lightColor);\r\n        this.p5.noStroke();\r\n\r\n        // If user is interacting? Draw everything\r\n        if (isUserInteracting || isCurrentlyGrowing) {\r\n            this.handleGrowState(LIGHT_TYPE.TOP);\r\n            this.handleGrowState(LIGHT_TYPE.BOTTOM);\r\n\r\n            let height = this.getHeight(LIGHT_TYPE.TOP);\r\n            this.p5.rect(newX, this.pos['y'], this.lightWidth, -height);\r\n\r\n            height = this.getHeight(LIGHT_TYPE.BOTTOM);\r\n            this.p5.rect(newX, this.pos['y'], this.lightWidth, height);  \r\n        } else {\r\n             // Am I supposed to draw this top light? \r\n            if (this.canDraw(LIGHT_TYPE.TOP)) {\r\n                // let height = this.getHeight(LIGHT_TYPE.TOP);\r\n                this.p5.rect(newX, this.pos['y'], this.lightWidth, -this.p5.height/2);\r\n            }\r\n\r\n            // Am I supposed to draw this bottom light?\r\n            if (this.canDraw(LIGHT_TYPE.BOTTOM)) {\r\n                // let height = this.getHeight(LIGHT_TYPE.BOTTOM);\r\n                this.p5.rect(newX, this.pos['y'], this.lightWidth, this.p5.height/2);    \r\n            }\r\n        }\r\n\r\n        // this.drawLightPoint();\r\n    }\r\n    \r\n    randomizeGrowState() {\r\n        let calcGrowState = (lightType) => {\r\n            let curGrowState = this.getGrowState(lightType); \r\n            if (curGrowState['active']) {                \r\n                // I'm currently growing or doing something. \r\n                // Pass\r\n            } else {\r\n                // Update my state. \r\n                let r = this.p5.int(this.p5.random(0, 2)); \r\n                r = r === 1 ? GROW_STATE.GROW : GROW_STATE.SHRINK;\r\n                LightConfigStore.setGrowState(this.curIdx, lightType, r, false);\r\n            }\r\n        }\r\n\r\n        // Set new grow states for top and bottom light for the current light. \r\n        calcGrowState(LIGHT_TYPE.TOP);\r\n        calcGrowState(LIGHT_TYPE.BOTTOM);           \r\n    }\r\n\r\n    // Grow & Shrink the height of the light.\r\n    handleGrowState(lightType) {\r\n        let curGrowthActive = this.getGrowState(lightType)['active'];\r\n        let curGrowState = this.getGrowState(lightType)['state'];\r\n        let curHeight = this.getHeight(lightType);\r\n\r\n        // Is the current light's grow active? \r\n        if (curGrowthActive) {\r\n            switch (curGrowState) {\r\n                case GROW_STATE.NONE: {\r\n                    // Pass don't do antyhing. \r\n                    break;\r\n                }\r\n    \r\n                case GROW_STATE.GROW: {\r\n                    if (curHeight < this.p5.height/2) {\r\n                        curHeight += GROW_FACTOR;\r\n                        LightConfigStore.setHeightState(this.curIdx, lightType, curHeight);\r\n                        this.mapPos(lightType, curHeight);\r\n                    } else {\r\n                        // Deactivate the current light. \r\n                        LightConfigStore.setGrowState(this.curIdx, lightType, GROW_STATE.NONE, false);\r\n                    }\r\n                    break;\r\n                }\r\n    \r\n                case GROW_STATE.SHRINK: {\r\n                    if (curHeight > 0) {\r\n                        curHeight -= GROW_FACTOR; \r\n                        LightConfigStore.setHeightState(this.curIdx, lightType, curHeight);\r\n                        this.mapPos(lightType, curHeight);\r\n                    } else {\r\n                        // Deactivate the current light. \r\n                        LightConfigStore.setGrowState(this.curIdx, lightType, GROW_STATE.NONE, false);\r\n                    }\r\n                    break;\r\n                }\r\n    \r\n                default: \r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    mapPos(lightType, height) {\r\n        if (lightType === LIGHT_TYPE.TOP) {\r\n            this.topPos['y'] = this.p5.map(height, 0, this.p5.height/2, this.p5.height/2, 0);\r\n        } else {\r\n            this.bottomPos['y'] = this.p5.map(height, 0, this.p5.height/2, this.p5.height/2, this.p5.height);\r\n        }\r\n    }\r\n\r\n    drawLightPoint() {\r\n        let newX = this.getNewPos();\r\n        this.p5.fill(this.lightPointColor)\r\n        this.p5.circle(newX, this.pos['y'], 10);\r\n    }\r\n    \r\n    getNewPos() {\r\n        return this.pos['x'] + this.lightWidth/2; \r\n    }\r\n\r\n    getGrowState(lightType) {\r\n        return LightConfigStore.getGrowState(this.curIdx)[lightType];\r\n    }\r\n\r\n    getHeight(lightType) {\r\n        let heightState = LightConfigStore.getHeightState(this.curIdx);\r\n        return heightState[lightType];\r\n    }\r\n\r\n    // Should this light be drawn? \r\n    canDraw(lightType) {\r\n        let drawState = LightConfigStore.getDrawState(this.curIdx);\r\n        return drawState[lightType]; // It's true or false. \r\n    }\r\n\r\n    // Is this light on? \r\n    isOn(lightType) {\r\n        let lightState = LightConfigStore.getLightState(this.curIdx);\r\n        return lightState[lightType] === LIGHT_STATE.ON; \r\n    }\r\n\r\n    isGrowing(lightType) {\r\n        let v = LightConfigStore.getGrowState(this.curIdx)[lightType]['active'];\r\n        return v;\r\n    }\r\n\r\n    updateGrowState(lightType) {\r\n        let curLightState = LightConfigStore.getLightState(this.curIdx)[lightType];\r\n        let curGrowState = LightConfigStore.getGrowState(this.curIdx)[lightType]; \r\n\r\n        // Is the light on? \r\n        if (curLightState === LIGHT_STATE.ON) {\r\n            // Is this light currently growing or shrinking? \r\n            if (curGrowState['active']) {\r\n                // I'm doing something - let's not do anything. \r\n            } else {\r\n                // Is the state set to shrink? Because it can only shrink. \r\n                if (curGrowState['state'] === GROW_STATE.SHRINK) {\r\n                    LightConfigStore.setGrowState(this.curIdx, lightType, GROW_STATE.SHRINK, true);\r\n                    // This light will not be turned on anymore.  \r\n                    LightConfigStore.setLightState(this.curIdx, lightType, LIGHT_STATE.OFF);                \r\n                } else {\r\n                    // Pass, we can't grow a light that's already on. \r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        if (curLightState === LIGHT_STATE.OFF) {\r\n            if (curGrowState['active']) {\r\n                // I'm doing something - let's not do anything. \r\n            } else {\r\n                if (curGrowState['state'] === GROW_STATE.GROW) {\r\n                    LightConfigStore.setGrowState(this.curIdx, lightType, GROW_STATE.GROW, true);\r\n                    // This light will not be turned on anymore.  \r\n                    LightConfigStore.setLightState(this.curIdx, lightType, LIGHT_STATE.ON);\r\n                } else {\r\n                    // Pass, we can't shrink a light that's already off. \r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    updateDrawState(lightType, state) {\r\n        LightConfigStore.setDrawState(this.curIdx, lightType, state); \r\n    }\r\n\r\n    // Set light heights based on the light configurations.\r\n    // Call this functions when new configs are received. \r\n    updateHeight() {\r\n        let lightState = LightConfigStore.getLightState(this.curIdx);         \r\n        let onHeight = this.p5.height/2;\r\n        let offHeight = 0;\r\n\r\n        // TOP light. \r\n        let lightType = LIGHT_TYPE.TOP; \r\n        if (lightState[lightType] === LIGHT_STATE.ON) {\r\n            LightConfigStore.setHeightState(this.curIdx, lightType, onHeight);\r\n        }\r\n\r\n        if (lightState[lightType] === LIGHT_STATE.OFF) {\r\n            LightConfigStore.setHeightState(this.curIdx, lightType, offHeight);\r\n        }\r\n\r\n        // BOTTOM light. \r\n        lightType = LIGHT_TYPE.BOTTOM; \r\n        if (lightState[lightType] === LIGHT_STATE.ON) {\r\n            LightConfigStore.setHeightState(this.curIdx, lightType, onHeight);\r\n        }\r\n\r\n        if (lightState[lightType] === LIGHT_STATE.OFF) {\r\n            LightConfigStore.setHeightState(this.curIdx, lightType, offHeight);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n    // Fired when new light updates are received. \r\n    // updateLights() {\r\n    //     console.log('New lights received: Update the light heights.');\r\n    //     for (let i = 0; i < NUM_LIGHTS; i++) {\r\n    //         let l = this.lights[i]; \r\n    //         // let configState = LightConfigStore.getState(i);\r\n    //         // l.setHeight(configState);\r\n    //     }\r\n    // }","/*\r\n  Name: LightManager.js\r\n  Author: Amay Kataria\r\n  Date: 02/19/2022\r\n  Description: A class responsible for handling all the lights. This class is the most critical class\r\n  in this project. \r\n*/\r\nimport Light from './Light'\r\nimport LightConfigStore, { LIGHT_TYPE  } from \"../stores/LightConfigStore\";\r\n\r\nconst NUM_LIGHTS = 24\r\n\r\nexport default class LightManager {\r\n    constructor(s) {\r\n        this.p5 = s; \r\n        this.lights = [];\r\n        this.curTime = Date.now();\r\n        this.gliderIdx = 0;\r\n        this.direction = true; // True - Right, False - Left\r\n        this.allLightsOff = false; \r\n        this.isCurrentlyGrowing = false; \r\n        this.timeOn = 0; \r\n    }\r\n    \r\n    setup() {\r\n        // Prepare the light collection.\r\n        this.prepareLights();\r\n        LightConfigStore.subscribeInfo(this.updateTimeOn.bind(this));\r\n        LightConfigStore.subscribeLights(this.updateLights.bind(this));\r\n    }\r\n\r\n    // New bpm received. \r\n    updateTimeOn() {\r\n        let newBpm = LightConfigStore.getBpm();\r\n        this.timeOn = (60 * 1000)/newBpm;\r\n    }\r\n\r\n    updateLights() {\r\n        this.resetSystem();\r\n    }\r\n\r\n    prepareLights() {\r\n        this.lights = []; \r\n\r\n        // Set max height again since the canvas has been resized. \r\n        LightConfigStore.setMaxHeight(this.p5.height/2);\r\n        \r\n        // Distance between each tube. \r\n        let lightIncrement = (this.p5.width) / NUM_LIGHTS;\r\n\r\n        // Width of each light is half the distance between each light.\r\n        let lightWidth = lightIncrement / 2;\r\n        for (let i = 0; i < NUM_LIGHTS; i++) {\r\n            let xPos = i * lightIncrement; \r\n            // Create a new light instance. \r\n            let l = new Light(this.p5, i, xPos, this.p5.height/2, lightWidth);\r\n            this.lights.push(l);\r\n        }\r\n    }\r\n    \r\n    draw(isUserInteracting, meshEllipsePos, boundaryWidth) {\r\n        // Is user interacting? Draw all the lights. \r\n        if (isUserInteracting) {\r\n            // Control the lights. \r\n            this.handleUserInteracting(meshEllipsePos, boundaryWidth);\r\n        } else {\r\n            // Reset this value here. \r\n            this.isCurrentlyGrowing = false;  \r\n            // Cycle the lights from left to right, then right to left. \r\n            this.handleUserNotInteracting(); \r\n        }\r\n\r\n        // Draw the lights based on the state. \r\n        for (let i = 0; i < this.lights.length; i++) {\r\n            this.lights[i].draw(isUserInteracting, this.isCurrentlyGrowing);\r\n        }\r\n    }\r\n\r\n    handleUserInteracting(meshEllipsePos, boundaryWidth) {       \r\n        // Update the light configuration based on the ellipse. \r\n        this.updateLightConfig(meshEllipsePos, boundaryWidth);\r\n\r\n        this.allLightsOff = false;\r\n    }\r\n\r\n    updateLightConfig(meshEllipsePos, boundaryWidth) {\r\n        for (let i = 0; i < this.lights.length; i++) {\r\n            let light = this.lights[i];\r\n\r\n            // Distance from the ellipse to the light's position. \r\n            let d = meshEllipsePos.dist(light.pos);\r\n\r\n            // Is the ellipse above the half-way line? \r\n            if (meshEllipsePos['y'] < this.p5.height/2) {\r\n                // Handle the top lights. \r\n                // Have we crossed the threshold? \r\n                if (d < boundaryWidth/2) {\r\n                    // This light is activated, grow or shrink. \r\n                    light.updateGrowState(LIGHT_TYPE.TOP);\r\n                }\r\n            } else { // Is the ellipse below the half-way line? \r\n                // Handle the bottom lights. \r\n                if (d < boundaryWidth/2) {\r\n                    // This light is activated, grow or shrink. \r\n                    light.updateGrowState(LIGHT_TYPE.BOTTOM);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleUserNotInteracting() {\r\n        // Are all lights completely grown out? \r\n        // Are the Grow states on all lights set to none?\r\n        for (let i = 0; i < this.lights.length; i++) {\r\n            let light = this.lights[i];\r\n            let top = light.isGrowing(LIGHT_TYPE.TOP);\r\n            let bottom = light.isGrowing(LIGHT_TYPE.BOTTOM);\r\n            this.isCurrentlyGrowing = this.isCurrentlyGrowing || top || bottom; \r\n        }\r\n\r\n        // A clean reset to the system. \r\n        if (!this.isCurrentlyGrowing & !this.allLightsOff) {\r\n            this.resetSystem();\r\n        }\r\n\r\n        if (!this.isCurrentlyGrowing) {\r\n            let elapsedTime  = Date.now() - this.curTime;\r\n            if (elapsedTime > this.timeOn) {\r\n                // Get the current light. \r\n                let light = this.lights[this.gliderIdx];\r\n    \r\n                // Are we going right? \r\n                if (this.direction) {\r\n                    if (light.isOn(LIGHT_TYPE.TOP)) {\r\n                        light.updateDrawState(LIGHT_TYPE.TOP, true);\r\n                        this.curTime = Date.now();\r\n                    }\r\n                    this.gliderIdx += 1;\r\n                } else {\r\n                    // We are definitely going left. \r\n                    if (light.isOn(LIGHT_TYPE.BOTTOM)) {\r\n                        light.updateDrawState(LIGHT_TYPE.BOTTOM, true);\r\n                        this.curTime = Date.now();\r\n                    }\r\n                    this.gliderIdx -= 1;\r\n                }\r\n    \r\n                // We have reached the right most point, start the bottom row. \r\n                if (this.gliderIdx === NUM_LIGHTS) {\r\n                    this.gliderIdx = NUM_LIGHTS - 1;\r\n                    this.direction = false; \r\n                }\r\n    \r\n                if (this.gliderIdx < 0) {\r\n                    // Turn off all the lights and start again. \r\n                    this.resetSystem();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    turnOffAllLights() {\r\n        console.log('Switch off all lights');\r\n        // Top and Bottom lights.\r\n        for (let i = 0; i < this.lights.length; i++) {\r\n            let light = this.lights[i];\r\n            light.updateDrawState(LIGHT_TYPE.TOP, false);\r\n            light.updateDrawState(LIGHT_TYPE.BOTTOM, false);\r\n        }\r\n\r\n        this.allLightsOff = true; \r\n    }\r\n\r\n    resetSystem() {\r\n        this.turnOffAllLights();\r\n        this.gliderIdx = 0; \r\n        this.direction = true;\r\n    }\r\n}","/*\r\n  Name: MeshManager.js\r\n  Author: Amay Kataria\r\n  Date: 02/19/2022\r\n  Description: A class responsible for drawing the connections from the ellipse to all\r\n  the moving lights on the canvas. \r\n*/\r\n\r\nimport { LIGHT_TYPE } from \"../stores/LightConfigStore\";\r\n\r\n// Handles all the code related to interaction with the canvas.\r\nconst EASING = 0.015;  \r\nexport default class MeshManager {\r\n    constructor(s) {\r\n        this.p5 = s; \r\n        this.ellipsePos = this.p5.createVector(0, 0);\r\n        this.boundaryWidth = this.p5.height/2;\r\n    }\r\n\r\n    draw(isUserInteracting, lights) {\r\n        if (isUserInteracting) {    \r\n            this.ellipsePos['x'] += (this.p5.mouseX - this.ellipsePos['x']) * EASING;\r\n            this.ellipsePos['y'] += (this.p5.mouseY - this.ellipsePos['y']) * EASING; \r\n\r\n            // Make sure the ellipse doesn't go outside the boundary.\r\n            this.containEllipse();\r\n\r\n            // Draw pull lines for top and bottom lights.\r\n            for (let i = 0; i < lights.length; i++) {\r\n                let light = lights[i];\r\n\r\n                // Use the local state to draw the lines. \r\n                if (this.ellipsePos['y'] < this.p5.height/2) {\r\n                    let pos = light.topPos;\r\n                    let height = light.getHeight(LIGHT_TYPE.TOP);\r\n                    if (height < this.p5.height/2 && height > 0) {\r\n                        this.drawLine(pos, this.ellipsePos, i);\r\n                    }\r\n                } else {\r\n                    let pos = light.bottomPos;\r\n                    let height = light.getHeight(LIGHT_TYPE.BOTTOM);\r\n                    if (height < this.p5.height/2 && height > 0) {\r\n                        this.drawLine(pos, this.ellipsePos, i);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Draw ellipse tracking the mouse. \r\n            this.drawEllipse();\r\n        }        \r\n    }\r\n    \r\n    // Calculate new ellipse position. \r\n    containEllipse() {\r\n        if (this.ellipsePos['x'] > this.p5.width) {\r\n            this.ellipsePos['x'] = this.p5.width;\r\n        } \r\n\r\n        if (this.ellipsePos['x'] < 0) {\r\n            this.ellipsePos['x'] = 0;\r\n        } \r\n\r\n        if (this.ellipsePos['y'] > this.p5.height) {\r\n            this.ellipsePos['y'] = this.p5.height;\r\n        } \r\n\r\n        if (this.ellipsePos['y'] < 0) {\r\n            this.ellipsePos['y'] = 0;\r\n        } \r\n    }\r\n\r\n    drawEllipse() {\r\n        // // Outer ellipse boundary \r\n        // this.p5.fill(this.p5.color(255, 255, 255, 50));\r\n        // this.p5.noStroke();\r\n        // this.p5.ellipse(this.ellipsePos['x'], this.ellipsePos['y'], this.boundaryWidth);  \r\n\r\n        // Inner ellipse\r\n        this.p5.fill(this.p5.color(255, 255, 255, 150));\r\n        this.p5.strokeWeight(3);\r\n        this.p5.stroke(this.p5.color('black'));\r\n        this.p5.ellipse(this.ellipsePos['x'], this.ellipsePos['y'], 60);  \r\n    }\r\n\r\n    drawLine(startPoint, endPoint, i) {\r\n        let opacity = this.p5.map(i, 0, 24, 100, 200);\r\n        let weight = this.p5.map(i, 0, 25, 2, 4);\r\n        this.p5.stroke(this.p5.color(255, 255, 255, opacity));\r\n        this.p5.strokeWeight(weight);\r\n        this.p5.line(startPoint['x'], startPoint['y'], endPoint['x'], endPoint['y']);\r\n    }\r\n}","/*\r\n  Name: bpmManager.js\r\n  Author: Amay Kataria\r\n  Date: 02/20/2022\r\n  Description: A class responsible for handling the logic to calculate the bpm for the current configuration.\r\n*/\r\n\r\nimport LightConfigStore, { LIGHT_TYPE } from \"../stores/LightConfigStore\";\r\n\r\nconst MAX_BPM = 250;\r\nconst MIN_BPM = 100;\r\nexport default class bpmManager {\r\n    constructor(s) {\r\n        this.p5 = s;\r\n        this.curBpm = LightConfigStore.bpm; \r\n        this.bpmSubscribers = []; \r\n        this.curTime = ''; \r\n    }\r\n\r\n    // Simple BPM calculator.\r\n    update(isInteracting, ellipsePos, lights) {\r\n        if (isInteracting) { \r\n            let shouldAdd = false; \r\n            if (((ellipsePos['x'] > this.p5.width/2) && (ellipsePos['y'] < this.p5.height/2))\r\n                || ((ellipsePos['x'] < this.p5.width/2) && (ellipsePos['y'] > this.p5.height/2))){\r\n                shouldAdd = true; \r\n            } else {\r\n                shouldAdd = false; \r\n            }\r\n            \r\n            // Number of lights that are on. \r\n            let sum = 0; \r\n            for (let i = 0; i < lights.length; i++) {\r\n                let light = lights[i];\r\n                if (light.isOn(LIGHT_TYPE.TOP)) {\r\n                    sum += 1; \r\n                }\r\n                if (light.isOn(LIGHT_TYPE.BOTTOM)) {\r\n                    sum += 1; \r\n                }\r\n            }\r\n\r\n            // Time that has elapsed. \r\n            let elapsedTime = Date.now() - this.curTime; \r\n            let v = this.p5.sin(elapsedTime /(sum)); \r\n            let mapped =  this.p5.map(v, -1, 1, 0, 0.25);\r\n            \r\n            // Calculate the new bpm. \r\n            this.curBpm = shouldAdd ? (this.curBpm + mapped) : (this.curBpm - mapped); \r\n            \r\n            if (this.curBpm < MIN_BPM) {\r\n                this.curBpm = MIN_BPM; \r\n            } \r\n\r\n            if (this.curBpm > MAX_BPM) {\r\n                this.curBpm = MAX_BPM;\r\n            }\r\n\r\n            // Set BPM so all components can get the updates. \r\n            LightConfigStore.setBpm(Math.floor(this.curBpm));\r\n        } else {\r\n            // Keep snapshotting the time, so we can calculate\r\n            // the elapsed time. \r\n            this.curTime = Date.now(); \r\n        }\r\n    }\r\n}","/*\r\n  Name: WaveCanvas.js\r\n  Author: Amay Kataria\r\n  Date: 02/19/2022\r\n  Description: Class responsible to paint the interactive P5.js canvas.\r\n*/\r\n\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\nimport {color} from './CommonStyles'\r\nimport p5 from 'p5'\r\nimport { ORIENTATION } from './App'\r\nimport LightManager from './LightManager'\r\nimport MeshManager from './MeshManager'\r\nimport BpmManager from './BpmManager'\r\n\r\nvar sketch = (s) => {\r\n  let isUserInteracting = false;\r\n  let lightManager, meshManager, bpmManager;\r\n  s.setup = () => {\r\n    let canvasContainer = s.select('#canvasContainer');\r\n    let height = canvasContainer.height;\r\n    s.createCanvas(window.innerWidth, height);\r\n\r\n    lightManager = new LightManager(s);\r\n    meshManager = new MeshManager(s);\r\n    bpmManager = new BpmManager(s); \r\n    lightManager.setup();\r\n  };\r\n\r\n  s.draw = () => {\r\n    s.background(s.color(0, 0, 0));  \r\n    lightManager.draw(isUserInteracting, meshManager.ellipsePos, meshManager.boundaryWidth);\r\n    s.drawCenterLine();\r\n    meshManager.draw(isUserInteracting, lightManager.lights); \r\n    bpmManager.update(isUserInteracting, meshManager.ellipsePos, lightManager.lights);\r\n  };\r\n\r\n  s.drawCenterLine = () => {\r\n    // Draw a center line. \r\n    s.stroke(\"black\")\r\n    s.strokeWeight(6)\r\n    s.line(0, s.height/2, s.width, s.height/2)\r\n  };\r\n\r\n  s.mousePressed = () => {\r\n    if (s.mouseY > s.height || s.mouseY < 0) {\r\n      // Ignore. \r\n    } else {\r\n      isUserInteracting = true; \r\n    }\r\n  };\r\n\r\n  s.mouseReleased = () => {\r\n    isUserInteracting = false; \r\n  };\r\n\r\n  s.windowResized = () => {\r\n    console.log('Canvas Resized.');\r\n    let canvasContainer = s.select('#canvasContainer');\r\n    let height = canvasContainer.height;\r\n    s.resizeCanvas(window.innerWidth, height); \r\n\r\n    // Prepare the lights again. \r\n    lightManager.prepareLights();\r\n  }\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    position: 'relative',\r\n    backgroundColor: color.bgBlack,\r\n    margin: 0,\r\n    padding: 0,\r\n    zIndex: 1\r\n  }\r\n};\r\n\r\nclass WaveCanvas extends React.Component {\r\n  constructor(props) {\r\n    super(props);   \r\n    this.containerRef = React.createRef();\r\n    this.sketchRef = React.createRef(); \r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log('Wave canvas mounted');    \r\n    this.myP5 = new p5(sketch, this.sketchRef.current);\r\n  }\r\n  \r\n  render() {     \r\n    let heightStyle = this.getHeightStyle();\r\n    let containerStyle = [styles.container, heightStyle];\r\n    return (\r\n      <div id={'canvasContainer'} \r\n        ref={this.sketchRef} \r\n        style={containerStyle}>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getHeightStyle() {\r\n    let height = this.getHeight();\r\n    let heightStyle = {\r\n      height: height + 'px'\r\n    };\r\n    return heightStyle; \r\n  }\r\n\r\n  getHeight() {\r\n    let deviceHeight = window.innerHeight;\r\n    let deviceWidth = window.innerWidth; \r\n    let c = 0; \r\n    if (this.props.orientation === ORIENTATION.PORTRAIT) {\r\n      if (deviceHeight < 900) {\r\n        c = 0.8;\r\n      }\r\n\r\n      if (deviceHeight > 900 && deviceHeight < 1000) {\r\n        c = 0.85;\r\n      }\r\n\r\n      if (deviceHeight > 1000) {\r\n        c = 0.88; \r\n      }\r\n    }\r\n\r\n    if (this.props.orientation === ORIENTATION.LANDSCAPE) {\r\n      if (deviceWidth < 1000) {\r\n        c = 0.70;  \r\n      } \r\n\r\n      if (deviceWidth > 1000) {\r\n        c = 0.82;\r\n      }\r\n    }\r\n\r\n    return deviceHeight * c;\r\n  }\r\n}\r\n\r\nexport default Radium(WaveCanvas);","/*\r\n  Name: BottomBar.js\r\n  Author: Amay Kataria\r\n  Date: 02/19/2022\r\n  Description: React component for the bottom bar on the page. This has the send button. \r\n*/\r\nimport React from 'react'\r\nimport Radium from 'radium'\r\nimport { ORIENTATION } from './App';\r\nimport {color, fontFamily, fontSize, padding} from './CommonStyles'\r\nimport Websocket from './Websocket';\r\nimport LightConfigStore from '../stores/LightConfigStore';\r\n\r\nconst styles = {\r\n    container: {\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        paddingLeft: padding.small,\r\n        paddingRight: padding.small,\r\n        // // // Common Styles\r\n        color: color.fbWhite,\r\n        fontFamily: fontFamily.josefin,\r\n        fontSize: fontSize.lessBig,\r\n        letterSpacing: '2px',\r\n        zIndex: 1,\r\n    },\r\n\r\n    info: {\r\n        backgroundColor: color.bgBlack,\r\n        padding: padding.verySmall,\r\n    }\r\n};\r\n\r\nclass BottomBar extends React.Component {\r\n  constructor(props) {\r\n    super(props); \r\n    this.state={\r\n      bpm: '',\r\n      index: ''\r\n    }\r\n    LightConfigStore.subscribeInfo(this.onInfoUpdate.bind(this));\r\n  }\r\n \r\n  render() {\r\n    let bpm = this.state.bpm + 'bpm'\r\n    let states = '#' + this.state.index; \r\n\r\n    let heightStyle = this.getHeightStyle();\r\n    return (\r\n      <div style={[styles.container, heightStyle]}>\r\n          <div style={styles.info}>{states}</div>\r\n          <div style={styles.info}>{bpm}</div>\r\n          <div onClick={this.onSend.bind(this)} style={styles.info}>Send</div>\r\n      </div>      \r\n    );\r\n  }\r\n\r\n  getHeightStyle() {\r\n    let height = this.getHeight();\r\n    let heightStyle = {\r\n      height: height + 'px'\r\n    };\r\n    return heightStyle; \r\n  }\r\n\r\n  getHeight() {\r\n    let deviceHeight = window.innerHeight;\r\n    let deviceWidth = window.innerWidth;\r\n    let c = 0; \r\n    if (this.props.orientation === ORIENTATION.PORTRAIT) {\r\n      if (deviceHeight < 900) {\r\n        c = 0.1\r\n      }\r\n\r\n      if (deviceHeight > 900 && deviceHeight < 1000) {\r\n        c = 0.075\r\n      }\r\n\r\n      if (deviceHeight > 1000) {\r\n        c = 0.06\r\n      }\r\n    }\r\n\r\n    if (this.props.orientation === ORIENTATION.LANDSCAPE) {\r\n      if (deviceWidth < 1000) {\r\n        c = 0.15; \r\n      }\r\n\r\n      if (deviceWidth > 1000) {\r\n        c = 0.09; \r\n      }\r\n    }\r\n\r\n    return deviceHeight * c; \r\n  }\r\n\r\n  onInfoUpdate() {\r\n    let idx = LightConfigStore.getConfigIndex();\r\n    let bpm = LightConfigStore.getBpm(); \r\n    this.setState({\r\n      index: idx + 1, \r\n      bpm: bpm\r\n    });\r\n  }\r\n\r\n  onSend(event) {\r\n    event.stopPropagation();\r\n    Websocket.commitLightConfigData();\r\n  }\r\n}\r\n\r\nexport default Radium(BottomBar);","/*\n  Name: App.js\n  Author: Amay Kataria\n  Date: 02/19/2022\n  Description: Entry point component for the application. \n*/\n\nimport React from 'react'\nimport Radium from 'radium'\nimport Websocket from './Websocket'\n\nimport Navbar from './Navbar';\nimport WaveCanvas from './WaveCanvas';\nimport BottomBar from './BottomBar';\n\n// Enum to track the device orientation. \nexport const ORIENTATION = {\n  PORTRAIT: 0,\n  LANDSCAPE: 1\n}\n\nconst styles = {\n  container: {\n    position: 'absolute',\n    top: '0px',\n    left: '0px',\n    right: '0px',\n    bottom: '0px',\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'column',\n    color: 'white',\n    height: '100vh',\n    width: '100vw',\n    zIndex: '1'\n  },\n\n  button: {\n    width: '100px',\n    height: '50px',\n    backgroundColor: 'white',\n    color: 'black'\n  }\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props); \n    window.addEventListener('resize', this.handleResize.bind(this));\n    this.state = {\n      orientation: ORIENTATION.PORTRAIT\n    };     \n  }\n\n  componentDidMount() {\n    this.evaluateOrientation();\n  }\n\n  render() {\n    return (\n      <div style={styles.container}>\n        <Navbar orientation={this.state.orientation} />\n        <WaveCanvas orientation={this.state.orientation} />\n        <BottomBar orientation={this.state.orientation} />\n      </div>\n    );\n  }\n\n  handleResize() {\n    // Resize triggered - evaluate orientation and render\n    // the components again be it. \n    this.evaluateOrientation();\n  }\n\n  evaluateOrientation() {\n    let t = (window.innerHeight < window.innerWidth); \n    if (t) {\n      console.log('App: Landscape');\n      this.setState({\n        orientation: ORIENTATION.LANDSCAPE\n      }); \n    } else {\n      console.log('App: Portrait');\n      this.setState({\n        orientation: ORIENTATION.PORTRAIT\n      });\n    }\n  }\n}\n\nexport default Radium(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './font/stylesheet.css';\nimport App from './components/App';\nimport {StyleRoot} from 'radium'\n\n// Use StyleRoot to enable keyframes and media queries for Javascript type\n// styles with Radium in components. \n// Single render function for the entire application. \nReactDOM.render(<StyleRoot><App /></StyleRoot>, document.getElementById('root'));"],"sourceRoot":""}